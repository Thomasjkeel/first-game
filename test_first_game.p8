pico-8 cartridge // http://www.pico-8.com
version 16
__lua__

-- globals --
-- variables --
local player
local mandarin
local coin

function _init()
 player = {
  x=64,
  y=64,
  color=9,
  name="thomas",
  width=8,
  height=8,
  move_speed=2,
  vertically_alligned=false,
  draw=function(self)
   spr(1, self.x, self.y)
   rect(self.x-1,self.y-1,self.x+self.width, self.y+self.height, 12)
   print(self.vertically_alligned,self.x+10, self.y, 7)
   -- print(self.name, self.x-7, self.y-7, 7)
  end,
  update=function(self)
   if btn(0) then
    self.x-=self.move_speed
   end
   if btn(1) then
    self.x+=self.move_speed
   end
   if btn(2) then
    self.y-=self.move_speed
   end
   if btn(3) then
    self.y+=self.move_speed
   end
   -- check hit detection
   local left=self.x
   local right=self.x+self.width
   local top=self.y
   local bottom=self.y+self.height
   if left<coin.x and coin.x<right and top<coin.y and coin.y<bottom then
    self.vertically_alligned=true
   else
    self.vertically_alligned=false
   end

  end
 }
 -- coin
 coin={
  x=flr(rnd(40))+64,
  y=flr(rnd(40))+64,
  update=function(self)
  end,
  draw=function(self)
   spr(3, self.x-3, self.y-4)
   pset(self.x,self.y,2)
  end
 }
 -- mandarin
 mandarin={
  x=flr(rnd(40))+5,
  y=flr(rnd(40))+5,
  update=function(self)
  end,
  draw=function(self)
   spr(4, self.x-3, self.y-4)
   pset(self.x,self.y,10)
  end
 }
end

function _update()
 player:update()
 coin:update()
 mandarin:update()
end

function _draw()
 cls(13)
 player:draw()
 coin:draw()
 mandarin:draw()
end


__gfx__
00000000099999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000009ccc90000000000009aa000000b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070009ccc9000000000009aaaa00004990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000999999900000000009aaaa00049999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700099999990000d000009aaaa00049999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700099099000000000009aaaa00004990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000009990999000000000009aa000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000999099900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000001412000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000020000000000020000001400020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000040000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0002000000001400020004000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000300000f10017200182002520023200202001c2001d2001620014200142000f1000c100141001a1002010025100291003310036100151001610000000000000000000000000000000000000000000000000000
000200000755007550075500755007550105500c550145500e5501355016550035000f500045000f5000450004500000000000000000000000000000000000000000000000000000000000000000000000000000
